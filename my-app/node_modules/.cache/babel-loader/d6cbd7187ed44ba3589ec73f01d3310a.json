{"ast":null,"code":"/**\n * Module dependencies.\n */\n\nvar Polling = require('./polling');\nvar util = require('util');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\n\n/**\n * Ajax polling transport.\n *\n * @api public\n */\n\nfunction XHR(req) {\n  Polling.call(this, req);\n}\n\n/**\n * Inherits from Polling.\n */\n\nutil.inherits(XHR, Polling);\n\n/**\n * Overrides `onRequest` to handle `OPTIONS`..\n *\n * @param {http.IncomingMessage}\n * @api private\n */\n\nXHR.prototype.onRequest = function (req) {\n  if ('OPTIONS' === req.method) {\n    var res = req.res;\n    var headers = this.headers(req);\n    headers['Access-Control-Allow-Headers'] = 'Content-Type';\n    res.writeHead(200, headers);\n    res.end();\n  } else {\n    Polling.prototype.onRequest.call(this, req);\n  }\n};\n\n/**\n * Returns headers for a response.\n *\n * @param {http.IncomingMessage} request\n * @param {Object} extra headers\n * @api private\n */\n\nXHR.prototype.headers = function (req, headers) {\n  headers = headers || {};\n  if (req.headers.origin) {\n    headers['Access-Control-Allow-Credentials'] = 'true';\n    headers['Access-Control-Allow-Origin'] = req.headers.origin;\n  } else {\n    headers['Access-Control-Allow-Origin'] = '*';\n  }\n  return Polling.prototype.headers.call(this, req, headers);\n};","map":{"version":3,"names":["Polling","require","util","module","exports","XHR","req","call","inherits","prototype","onRequest","method","res","headers","writeHead","end","origin"],"sources":["/home/user/Рабочий стол/pizza/project/node_modules/engine.io/lib/transports/polling-xhr.js"],"sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar Polling = require('./polling');\nvar util = require('util');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\n\n/**\n * Ajax polling transport.\n *\n * @api public\n */\n\nfunction XHR (req) {\n  Polling.call(this, req);\n}\n\n/**\n * Inherits from Polling.\n */\n\nutil.inherits(XHR, Polling);\n\n/**\n * Overrides `onRequest` to handle `OPTIONS`..\n *\n * @param {http.IncomingMessage}\n * @api private\n */\n\nXHR.prototype.onRequest = function (req) {\n  if ('OPTIONS' === req.method) {\n    var res = req.res;\n    var headers = this.headers(req);\n    headers['Access-Control-Allow-Headers'] = 'Content-Type';\n    res.writeHead(200, headers);\n    res.end();\n  } else {\n    Polling.prototype.onRequest.call(this, req);\n  }\n};\n\n/**\n * Returns headers for a response.\n *\n * @param {http.IncomingMessage} request\n * @param {Object} extra headers\n * @api private\n */\n\nXHR.prototype.headers = function (req, headers) {\n  headers = headers || {};\n\n  if (req.headers.origin) {\n    headers['Access-Control-Allow-Credentials'] = 'true';\n    headers['Access-Control-Allow-Origin'] = req.headers.origin;\n  } else {\n    headers['Access-Control-Allow-Origin'] = '*';\n  }\n\n  return Polling.prototype.headers.call(this, req, headers);\n};\n"],"mappings":"AACA;AACA;AACA;;AAEA,IAAIA,OAAO,GAAGC,OAAO,CAAC,WAAW,CAAC;AAClC,IAAIC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;;AAE1B;AACA;AACA;;AAEAE,MAAM,CAACC,OAAO,GAAGC,GAAG;;AAEpB;AACA;AACA;AACA;AACA;;AAEA,SAASA,GAAG,CAAEC,GAAG,EAAE;EACjBN,OAAO,CAACO,IAAI,CAAC,IAAI,EAAED,GAAG,CAAC;AACzB;;AAEA;AACA;AACA;;AAEAJ,IAAI,CAACM,QAAQ,CAACH,GAAG,EAAEL,OAAO,CAAC;;AAE3B;AACA;AACA;AACA;AACA;AACA;;AAEAK,GAAG,CAACI,SAAS,CAACC,SAAS,GAAG,UAAUJ,GAAG,EAAE;EACvC,IAAI,SAAS,KAAKA,GAAG,CAACK,MAAM,EAAE;IAC5B,IAAIC,GAAG,GAAGN,GAAG,CAACM,GAAG;IACjB,IAAIC,OAAO,GAAG,IAAI,CAACA,OAAO,CAACP,GAAG,CAAC;IAC/BO,OAAO,CAAC,8BAA8B,CAAC,GAAG,cAAc;IACxDD,GAAG,CAACE,SAAS,CAAC,GAAG,EAAED,OAAO,CAAC;IAC3BD,GAAG,CAACG,GAAG,EAAE;EACX,CAAC,MAAM;IACLf,OAAO,CAACS,SAAS,CAACC,SAAS,CAACH,IAAI,CAAC,IAAI,EAAED,GAAG,CAAC;EAC7C;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAD,GAAG,CAACI,SAAS,CAACI,OAAO,GAAG,UAAUP,GAAG,EAAEO,OAAO,EAAE;EAC9CA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EAEvB,IAAIP,GAAG,CAACO,OAAO,CAACG,MAAM,EAAE;IACtBH,OAAO,CAAC,kCAAkC,CAAC,GAAG,MAAM;IACpDA,OAAO,CAAC,6BAA6B,CAAC,GAAGP,GAAG,CAACO,OAAO,CAACG,MAAM;EAC7D,CAAC,MAAM;IACLH,OAAO,CAAC,6BAA6B,CAAC,GAAG,GAAG;EAC9C;EAEA,OAAOb,OAAO,CAACS,SAAS,CAACI,OAAO,CAACN,IAAI,CAAC,IAAI,EAAED,GAAG,EAAEO,OAAO,CAAC;AAC3D,CAAC"},"metadata":{},"sourceType":"script"}