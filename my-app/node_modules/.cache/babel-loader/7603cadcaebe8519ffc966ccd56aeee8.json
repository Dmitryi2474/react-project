{"ast":null,"code":"var semver = require(\"semver\");\nvar validateLicense = require('validate-npm-package-license');\nvar hostedGitInfo = require(\"hosted-git-info\");\nvar isBuiltinModule = require(\"resolve\").isCore;\nvar depTypes = [\"dependencies\", \"devDependencies\", \"optionalDependencies\"];\nvar extractDescription = require(\"./extract_description\");\nvar url = require(\"url\");\nvar typos = require(\"./typos.json\");\nvar fixer = module.exports = {\n  // default warning function\n  warn: function () {},\n  fixRepositoryField: function (data) {\n    if (data.repositories) {\n      this.warn(\"repositories\");\n      data.repository = data.repositories[0];\n    }\n    if (!data.repository) return this.warn(\"missingRepository\");\n    if (typeof data.repository === \"string\") {\n      data.repository = {\n        type: \"git\",\n        url: data.repository\n      };\n    }\n    var r = data.repository.url || \"\";\n    if (r) {\n      var hosted = hostedGitInfo.fromUrl(r);\n      if (hosted) {\n        r = data.repository.url = hosted.getDefaultRepresentation() == \"shortcut\" ? hosted.https() : hosted.toString();\n      }\n    }\n    if (r.match(/github.com\\/[^\\/]+\\/[^\\/]+\\.git\\.git$/)) {\n      this.warn(\"brokenGitUrl\", r);\n    }\n  },\n  fixTypos: function (data) {\n    Object.keys(typos.topLevel).forEach(function (d) {\n      if (data.hasOwnProperty(d)) {\n        this.warn(\"typo\", d, typos.topLevel[d]);\n      }\n    }, this);\n  },\n  fixScriptsField: function (data) {\n    if (!data.scripts) return;\n    if (typeof data.scripts !== \"object\") {\n      this.warn(\"nonObjectScripts\");\n      delete data.scripts;\n      return;\n    }\n    Object.keys(data.scripts).forEach(function (k) {\n      if (typeof data.scripts[k] !== \"string\") {\n        this.warn(\"nonStringScript\");\n        delete data.scripts[k];\n      } else if (typos.script[k] && !data.scripts[typos.script[k]]) {\n        this.warn(\"typo\", k, typos.script[k], \"scripts\");\n      }\n    }, this);\n  },\n  fixFilesField: function (data) {\n    var files = data.files;\n    if (files && !Array.isArray(files)) {\n      this.warn(\"nonArrayFiles\");\n      delete data.files;\n    } else if (data.files) {\n      data.files = data.files.filter(function (file) {\n        if (!file || typeof file !== \"string\") {\n          this.warn(\"invalidFilename\", file);\n          return false;\n        } else {\n          return true;\n        }\n      }, this);\n    }\n  },\n  fixBinField: function (data) {\n    if (!data.bin) return;\n    if (typeof data.bin === \"string\") {\n      var b = {};\n      var match;\n      if (match = data.name.match(/^@[^/]+[/](.*)$/)) {\n        b[match[1]] = data.bin;\n      } else {\n        b[data.name] = data.bin;\n      }\n      data.bin = b;\n    }\n  },\n  fixManField: function (data) {\n    if (!data.man) return;\n    if (typeof data.man === \"string\") {\n      data.man = [data.man];\n    }\n  },\n  fixBundleDependenciesField: function (data) {\n    var bdd = \"bundledDependencies\";\n    var bd = \"bundleDependencies\";\n    if (data[bdd] && !data[bd]) {\n      data[bd] = data[bdd];\n      delete data[bdd];\n    }\n    if (data[bd] && !Array.isArray(data[bd])) {\n      this.warn(\"nonArrayBundleDependencies\");\n      delete data[bd];\n    } else if (data[bd]) {\n      data[bd] = data[bd].filter(function (bd) {\n        if (!bd || typeof bd !== 'string') {\n          this.warn(\"nonStringBundleDependency\", bd);\n          return false;\n        } else {\n          if (!data.dependencies) {\n            data.dependencies = {};\n          }\n          if (!data.dependencies.hasOwnProperty(bd)) {\n            this.warn(\"nonDependencyBundleDependency\", bd);\n            data.dependencies[bd] = \"*\";\n          }\n          return true;\n        }\n      }, this);\n    }\n  },\n  fixDependencies: function (data, strict) {\n    var loose = !strict;\n    objectifyDeps(data, this.warn);\n    addOptionalDepsToDeps(data, this.warn);\n    this.fixBundleDependenciesField(data);\n    ['dependencies', 'devDependencies'].forEach(function (deps) {\n      if (!(deps in data)) return;\n      if (!data[deps] || typeof data[deps] !== \"object\") {\n        this.warn(\"nonObjectDependencies\", deps);\n        delete data[deps];\n        return;\n      }\n      Object.keys(data[deps]).forEach(function (d) {\n        var r = data[deps][d];\n        if (typeof r !== 'string') {\n          this.warn(\"nonStringDependency\", d, JSON.stringify(r));\n          delete data[deps][d];\n        }\n        var hosted = hostedGitInfo.fromUrl(data[deps][d]);\n        if (hosted) data[deps][d] = hosted.toString();\n      }, this);\n    }, this);\n  },\n  fixModulesField: function (data) {\n    if (data.modules) {\n      this.warn(\"deprecatedModules\");\n      delete data.modules;\n    }\n  },\n  fixKeywordsField: function (data) {\n    if (typeof data.keywords === \"string\") {\n      data.keywords = data.keywords.split(/,\\s+/);\n    }\n    if (data.keywords && !Array.isArray(data.keywords)) {\n      delete data.keywords;\n      this.warn(\"nonArrayKeywords\");\n    } else if (data.keywords) {\n      data.keywords = data.keywords.filter(function (kw) {\n        if (typeof kw !== \"string\" || !kw) {\n          this.warn(\"nonStringKeyword\");\n          return false;\n        } else {\n          return true;\n        }\n      }, this);\n    }\n  },\n  fixVersionField: function (data, strict) {\n    // allow \"loose\" semver 1.0 versions in non-strict mode\n    // enforce strict semver 2.0 compliance in strict mode\n    var loose = !strict;\n    if (!data.version) {\n      data.version = \"\";\n      return true;\n    }\n    if (!semver.valid(data.version, loose)) {\n      throw new Error('Invalid version: \"' + data.version + '\"');\n    }\n    data.version = semver.clean(data.version, loose);\n    return true;\n  },\n  fixPeople: function (data) {\n    modifyPeople(data, unParsePerson);\n    modifyPeople(data, parsePerson);\n  },\n  fixNameField: function (data, options) {\n    if (typeof options === \"boolean\") options = {\n      strict: options\n    };else if (typeof options === \"undefined\") options = {};\n    var strict = options.strict;\n    if (!data.name && !strict) {\n      data.name = \"\";\n      return;\n    }\n    if (typeof data.name !== \"string\") {\n      throw new Error(\"name field must be a string.\");\n    }\n    if (!strict) data.name = data.name.trim();\n    ensureValidName(data.name, strict, options.allowLegacyCase);\n    if (isBuiltinModule(data.name)) this.warn(\"conflictingName\", data.name);\n  },\n  fixDescriptionField: function (data) {\n    if (data.description && typeof data.description !== 'string') {\n      this.warn(\"nonStringDescription\");\n      delete data.description;\n    }\n    if (data.readme && !data.description) data.description = extractDescription(data.readme);\n    if (data.description === undefined) delete data.description;\n    if (!data.description) this.warn(\"missingDescription\");\n  },\n  fixReadmeField: function (data) {\n    if (!data.readme) {\n      this.warn(\"missingReadme\");\n      data.readme = \"ERROR: No README data found!\";\n    }\n  },\n  fixBugsField: function (data) {\n    if (!data.bugs && data.repository && data.repository.url) {\n      var hosted = hostedGitInfo.fromUrl(data.repository.url);\n      if (hosted && hosted.bugs()) {\n        data.bugs = {\n          url: hosted.bugs()\n        };\n      }\n    } else if (data.bugs) {\n      var emailRe = /^.+@.*\\..+$/;\n      if (typeof data.bugs == \"string\") {\n        if (emailRe.test(data.bugs)) data.bugs = {\n          email: data.bugs\n        };else if (url.parse(data.bugs).protocol) data.bugs = {\n          url: data.bugs\n        };else this.warn(\"nonEmailUrlBugsString\");\n      } else {\n        bugsTypos(data.bugs, this.warn);\n        var oldBugs = data.bugs;\n        data.bugs = {};\n        if (oldBugs.url) {\n          if (typeof oldBugs.url == \"string\" && url.parse(oldBugs.url).protocol) data.bugs.url = oldBugs.url;else this.warn(\"nonUrlBugsUrlField\");\n        }\n        if (oldBugs.email) {\n          if (typeof oldBugs.email == \"string\" && emailRe.test(oldBugs.email)) data.bugs.email = oldBugs.email;else this.warn(\"nonEmailBugsEmailField\");\n        }\n      }\n      if (!data.bugs.email && !data.bugs.url) {\n        delete data.bugs;\n        this.warn(\"emptyNormalizedBugs\");\n      }\n    }\n  },\n  fixHomepageField: function (data) {\n    if (!data.homepage && data.repository && data.repository.url) {\n      var hosted = hostedGitInfo.fromUrl(data.repository.url);\n      if (hosted && hosted.docs()) data.homepage = hosted.docs();\n    }\n    if (!data.homepage) return;\n    if (typeof data.homepage !== \"string\") {\n      this.warn(\"nonUrlHomepage\");\n      return delete data.homepage;\n    }\n    if (!url.parse(data.homepage).protocol) {\n      data.homepage = \"http://\" + data.homepage;\n    }\n  },\n  fixLicenseField: function (data) {\n    if (!data.license) {\n      return this.warn(\"missingLicense\");\n    } else {\n      if (typeof data.license !== 'string' || data.license.length < 1 || data.license.trim() === '') {\n        this.warn(\"invalidLicense\");\n      } else {\n        if (!validateLicense(data.license).validForNewPackages) this.warn(\"invalidLicense\");\n      }\n    }\n  }\n};\nfunction isValidScopedPackageName(spec) {\n  if (spec.charAt(0) !== '@') return false;\n  var rest = spec.slice(1).split('/');\n  if (rest.length !== 2) return false;\n  return rest[0] && rest[1] && rest[0] === encodeURIComponent(rest[0]) && rest[1] === encodeURIComponent(rest[1]);\n}\nfunction isCorrectlyEncodedName(spec) {\n  return !spec.match(/[\\/@\\s\\+%:]/) && spec === encodeURIComponent(spec);\n}\nfunction ensureValidName(name, strict, allowLegacyCase) {\n  if (name.charAt(0) === \".\" || !(isValidScopedPackageName(name) || isCorrectlyEncodedName(name)) || strict && !allowLegacyCase && name !== name.toLowerCase() || name.toLowerCase() === \"node_modules\" || name.toLowerCase() === \"favicon.ico\") {\n    throw new Error(\"Invalid name: \" + JSON.stringify(name));\n  }\n}\nfunction modifyPeople(data, fn) {\n  if (data.author) data.author = fn(data.author);\n  [\"maintainers\", \"contributors\"].forEach(function (set) {\n    if (!Array.isArray(data[set])) return;\n    data[set] = data[set].map(fn);\n  });\n  return data;\n}\nfunction unParsePerson(person) {\n  if (typeof person === \"string\") return person;\n  var name = person.name || \"\";\n  var u = person.url || person.web;\n  var url = u ? \" (\" + u + \")\" : \"\";\n  var e = person.email || person.mail;\n  var email = e ? \" <\" + e + \">\" : \"\";\n  return name + email + url;\n}\nfunction parsePerson(person) {\n  if (typeof person !== \"string\") return person;\n  var name = person.match(/^([^\\(<]+)/);\n  var url = person.match(/\\(([^\\)]+)\\)/);\n  var email = person.match(/<([^>]+)>/);\n  var obj = {};\n  if (name && name[0].trim()) obj.name = name[0].trim();\n  if (email) obj.email = email[1];\n  if (url) obj.url = url[1];\n  return obj;\n}\nfunction addOptionalDepsToDeps(data, warn) {\n  var o = data.optionalDependencies;\n  if (!o) return;\n  var d = data.dependencies || {};\n  Object.keys(o).forEach(function (k) {\n    d[k] = o[k];\n  });\n  data.dependencies = d;\n}\nfunction depObjectify(deps, type, warn) {\n  if (!deps) return {};\n  if (typeof deps === \"string\") {\n    deps = deps.trim().split(/[\\n\\r\\s\\t ,]+/);\n  }\n  if (!Array.isArray(deps)) return deps;\n  warn(\"deprecatedArrayDependencies\", type);\n  var o = {};\n  deps.filter(function (d) {\n    return typeof d === \"string\";\n  }).forEach(function (d) {\n    d = d.trim().split(/(:?[@\\s><=])/);\n    var dn = d.shift();\n    var dv = d.join(\"\");\n    dv = dv.trim();\n    dv = dv.replace(/^@/, \"\");\n    o[dn] = dv;\n  });\n  return o;\n}\nfunction objectifyDeps(data, warn) {\n  depTypes.forEach(function (type) {\n    if (!data[type]) return;\n    data[type] = depObjectify(data[type], type, warn);\n  });\n}\nfunction bugsTypos(bugs, warn) {\n  if (!bugs) return;\n  Object.keys(bugs).forEach(function (k) {\n    if (typos.bugs[k]) {\n      warn(\"typo\", k, typos.bugs[k], \"bugs\");\n      bugs[typos.bugs[k]] = bugs[k];\n      delete bugs[k];\n    }\n  });\n}","map":{"version":3,"names":["semver","require","validateLicense","hostedGitInfo","isBuiltinModule","isCore","depTypes","extractDescription","url","typos","fixer","module","exports","warn","fixRepositoryField","data","repositories","repository","type","r","hosted","fromUrl","getDefaultRepresentation","https","toString","match","fixTypos","Object","keys","topLevel","forEach","d","hasOwnProperty","fixScriptsField","scripts","k","script","fixFilesField","files","Array","isArray","filter","file","fixBinField","bin","b","name","fixManField","man","fixBundleDependenciesField","bdd","bd","dependencies","fixDependencies","strict","loose","objectifyDeps","addOptionalDepsToDeps","deps","JSON","stringify","fixModulesField","modules","fixKeywordsField","keywords","split","kw","fixVersionField","version","valid","Error","clean","fixPeople","modifyPeople","unParsePerson","parsePerson","fixNameField","options","trim","ensureValidName","allowLegacyCase","fixDescriptionField","description","readme","undefined","fixReadmeField","fixBugsField","bugs","emailRe","test","email","parse","protocol","bugsTypos","oldBugs","fixHomepageField","homepage","docs","fixLicenseField","license","length","validForNewPackages","isValidScopedPackageName","spec","charAt","rest","slice","encodeURIComponent","isCorrectlyEncodedName","toLowerCase","fn","author","set","map","person","u","web","e","mail","obj","o","optionalDependencies","depObjectify","dn","shift","dv","join","replace"],"sources":["/home/user/Рабочий стол/pizza/project/node_modules/normalize-package-data/lib/fixer.js"],"sourcesContent":["var semver = require(\"semver\")\nvar validateLicense = require('validate-npm-package-license');\nvar hostedGitInfo = require(\"hosted-git-info\")\nvar isBuiltinModule = require(\"resolve\").isCore\nvar depTypes = [\"dependencies\",\"devDependencies\",\"optionalDependencies\"]\nvar extractDescription = require(\"./extract_description\")\nvar url = require(\"url\")\nvar typos = require(\"./typos.json\")\n\nvar fixer = module.exports = {\n  // default warning function\n  warn: function() {},\n\n  fixRepositoryField: function(data) {\n    if (data.repositories) {\n      this.warn(\"repositories\");\n      data.repository = data.repositories[0]\n    }\n    if (!data.repository) return this.warn(\"missingRepository\")\n    if (typeof data.repository === \"string\") {\n      data.repository = {\n        type: \"git\",\n        url: data.repository\n      }\n    }\n    var r = data.repository.url || \"\"\n    if (r) {\n      var hosted = hostedGitInfo.fromUrl(r)\n      if (hosted) {\n        r = data.repository.url\n          = hosted.getDefaultRepresentation() == \"shortcut\" ? hosted.https() : hosted.toString()\n      }\n    }\n\n    if (r.match(/github.com\\/[^\\/]+\\/[^\\/]+\\.git\\.git$/)) {\n      this.warn(\"brokenGitUrl\", r)\n    }\n  }\n\n, fixTypos: function(data) {\n    Object.keys(typos.topLevel).forEach(function (d) {\n      if (data.hasOwnProperty(d)) {\n        this.warn(\"typo\", d, typos.topLevel[d])\n      }\n    }, this)\n  }\n\n, fixScriptsField: function(data) {\n    if (!data.scripts) return\n    if (typeof data.scripts !== \"object\") {\n      this.warn(\"nonObjectScripts\")\n      delete data.scripts\n      return\n    }\n    Object.keys(data.scripts).forEach(function (k) {\n      if (typeof data.scripts[k] !== \"string\") {\n        this.warn(\"nonStringScript\")\n        delete data.scripts[k]\n      } else if (typos.script[k] && !data.scripts[typos.script[k]]) {\n        this.warn(\"typo\", k, typos.script[k], \"scripts\")\n      }\n    }, this)\n  }\n\n, fixFilesField: function(data) {\n    var files = data.files\n    if (files && !Array.isArray(files)) {\n      this.warn(\"nonArrayFiles\")\n      delete data.files\n    } else if (data.files) {\n      data.files = data.files.filter(function(file) {\n        if (!file || typeof file !== \"string\") {\n          this.warn(\"invalidFilename\", file)\n          return false\n        } else {\n          return true\n        }\n      }, this)\n    }\n  }\n\n, fixBinField: function(data) {\n    if (!data.bin) return;\n    if (typeof data.bin === \"string\") {\n      var b = {}\n      var match\n      if (match = data.name.match(/^@[^/]+[/](.*)$/)) {\n        b[match[1]] = data.bin\n      } else {\n        b[data.name] = data.bin\n      }\n      data.bin = b\n    }\n  }\n\n, fixManField: function(data) {\n    if (!data.man) return;\n    if (typeof data.man === \"string\") {\n      data.man = [ data.man ]\n    }\n  }\n, fixBundleDependenciesField: function(data) {\n    var bdd = \"bundledDependencies\"\n    var bd = \"bundleDependencies\"\n    if (data[bdd] && !data[bd]) {\n      data[bd] = data[bdd]\n      delete data[bdd]\n    }\n    if (data[bd] && !Array.isArray(data[bd])) {\n      this.warn(\"nonArrayBundleDependencies\")\n      delete data[bd]\n    } else if (data[bd]) {\n      data[bd] = data[bd].filter(function(bd) {\n        if (!bd || typeof bd !== 'string') {\n          this.warn(\"nonStringBundleDependency\", bd)\n          return false\n        } else {\n          if (!data.dependencies) {\n            data.dependencies = {}\n          }\n          if (!data.dependencies.hasOwnProperty(bd)) {\n            this.warn(\"nonDependencyBundleDependency\", bd)\n            data.dependencies[bd] = \"*\"\n          }\n          return true\n        }\n      }, this)\n    }\n  }\n\n, fixDependencies: function(data, strict) {\n    var loose = !strict\n    objectifyDeps(data, this.warn)\n    addOptionalDepsToDeps(data, this.warn)\n    this.fixBundleDependenciesField(data)\n\n    ;['dependencies','devDependencies'].forEach(function(deps) {\n      if (!(deps in data)) return\n      if (!data[deps] || typeof data[deps] !== \"object\") {\n        this.warn(\"nonObjectDependencies\", deps)\n        delete data[deps]\n        return\n      }\n      Object.keys(data[deps]).forEach(function (d) {\n        var r = data[deps][d]\n        if (typeof r !== 'string') {\n          this.warn(\"nonStringDependency\", d, JSON.stringify(r))\n          delete data[deps][d]\n        }\n        var hosted = hostedGitInfo.fromUrl(data[deps][d])\n        if (hosted) data[deps][d] = hosted.toString()\n      }, this)\n    }, this)\n  }\n\n, fixModulesField: function (data) {\n    if (data.modules) {\n      this.warn(\"deprecatedModules\")\n      delete data.modules\n    }\n  }\n\n, fixKeywordsField: function (data) {\n    if (typeof data.keywords === \"string\") {\n      data.keywords = data.keywords.split(/,\\s+/)\n    }\n    if (data.keywords && !Array.isArray(data.keywords)) {\n      delete data.keywords\n      this.warn(\"nonArrayKeywords\")\n    } else if (data.keywords) {\n      data.keywords = data.keywords.filter(function(kw) {\n        if (typeof kw !== \"string\" || !kw) {\n          this.warn(\"nonStringKeyword\");\n          return false\n        } else {\n          return true\n        }\n      }, this)\n    }\n  }\n\n, fixVersionField: function(data, strict) {\n    // allow \"loose\" semver 1.0 versions in non-strict mode\n    // enforce strict semver 2.0 compliance in strict mode\n    var loose = !strict\n    if (!data.version) {\n      data.version = \"\"\n      return true\n    }\n    if (!semver.valid(data.version, loose)) {\n      throw new Error('Invalid version: \"'+ data.version + '\"')\n    }\n    data.version = semver.clean(data.version, loose)\n    return true\n  }\n\n, fixPeople: function(data) {\n    modifyPeople(data, unParsePerson)\n    modifyPeople(data, parsePerson)\n  }\n\n, fixNameField: function(data, options) {\n    if (typeof options === \"boolean\") options = {strict: options}\n    else if (typeof options === \"undefined\") options = {}\n    var strict = options.strict\n    if (!data.name && !strict) {\n      data.name = \"\"\n      return\n    }\n    if (typeof data.name !== \"string\") {\n      throw new Error(\"name field must be a string.\")\n    }\n    if (!strict)\n      data.name = data.name.trim()\n    ensureValidName(data.name, strict, options.allowLegacyCase)\n    if (isBuiltinModule(data.name))\n      this.warn(\"conflictingName\", data.name)\n  }\n\n\n, fixDescriptionField: function (data) {\n    if (data.description && typeof data.description !== 'string') {\n      this.warn(\"nonStringDescription\")\n      delete data.description\n    }\n    if (data.readme && !data.description)\n      data.description = extractDescription(data.readme)\n      if(data.description === undefined) delete data.description;\n    if (!data.description) this.warn(\"missingDescription\")\n  }\n\n, fixReadmeField: function (data) {\n    if (!data.readme) {\n      this.warn(\"missingReadme\")\n      data.readme = \"ERROR: No README data found!\"\n    }\n  }\n\n, fixBugsField: function(data) {\n    if (!data.bugs && data.repository && data.repository.url) {\n      var hosted = hostedGitInfo.fromUrl(data.repository.url)\n      if(hosted && hosted.bugs()) {\n        data.bugs = {url: hosted.bugs()}\n      }\n    }\n    else if(data.bugs) {\n      var emailRe = /^.+@.*\\..+$/\n      if(typeof data.bugs == \"string\") {\n        if(emailRe.test(data.bugs))\n          data.bugs = {email:data.bugs}\n        else if(url.parse(data.bugs).protocol)\n          data.bugs = {url: data.bugs}\n        else\n          this.warn(\"nonEmailUrlBugsString\")\n      }\n      else {\n        bugsTypos(data.bugs, this.warn)\n        var oldBugs = data.bugs\n        data.bugs = {}\n        if(oldBugs.url) {\n          if(typeof(oldBugs.url) == \"string\" && url.parse(oldBugs.url).protocol)\n            data.bugs.url = oldBugs.url\n          else\n            this.warn(\"nonUrlBugsUrlField\")\n        }\n        if(oldBugs.email) {\n          if(typeof(oldBugs.email) == \"string\" && emailRe.test(oldBugs.email))\n            data.bugs.email = oldBugs.email\n          else\n            this.warn(\"nonEmailBugsEmailField\")\n        }\n      }\n      if(!data.bugs.email && !data.bugs.url) {\n        delete data.bugs\n        this.warn(\"emptyNormalizedBugs\")\n      }\n    }\n  }\n\n, fixHomepageField: function(data) {\n    if (!data.homepage && data.repository && data.repository.url) {\n      var hosted = hostedGitInfo.fromUrl(data.repository.url)\n      if (hosted && hosted.docs()) data.homepage = hosted.docs()\n    }\n    if (!data.homepage) return\n\n    if(typeof data.homepage !== \"string\") {\n      this.warn(\"nonUrlHomepage\")\n      return delete data.homepage\n    }\n    if(!url.parse(data.homepage).protocol) {\n      data.homepage = \"http://\" + data.homepage\n    }\n  }\n\n, fixLicenseField: function(data) {\n    if (!data.license) {\n      return this.warn(\"missingLicense\")\n    } else{\n      if (\n        typeof(data.license) !== 'string' ||\n        data.license.length < 1 ||\n        data.license.trim() === ''\n      ) {\n        this.warn(\"invalidLicense\")\n      } else {\n        if (!validateLicense(data.license).validForNewPackages)\n          this.warn(\"invalidLicense\")\n      }\n    }\n  }\n}\n\nfunction isValidScopedPackageName(spec) {\n  if (spec.charAt(0) !== '@') return false\n\n  var rest = spec.slice(1).split('/')\n  if (rest.length !== 2) return false\n\n  return rest[0] && rest[1] &&\n    rest[0] === encodeURIComponent(rest[0]) &&\n    rest[1] === encodeURIComponent(rest[1])\n}\n\nfunction isCorrectlyEncodedName(spec) {\n  return !spec.match(/[\\/@\\s\\+%:]/) &&\n    spec === encodeURIComponent(spec)\n}\n\nfunction ensureValidName (name, strict, allowLegacyCase) {\n  if (name.charAt(0) === \".\" ||\n      !(isValidScopedPackageName(name) || isCorrectlyEncodedName(name)) ||\n      (strict && (!allowLegacyCase) && name !== name.toLowerCase()) ||\n      name.toLowerCase() === \"node_modules\" ||\n      name.toLowerCase() === \"favicon.ico\") {\n        throw new Error(\"Invalid name: \" + JSON.stringify(name))\n  }\n}\n\nfunction modifyPeople (data, fn) {\n  if (data.author) data.author = fn(data.author)\n  ;[\"maintainers\", \"contributors\"].forEach(function (set) {\n    if (!Array.isArray(data[set])) return;\n    data[set] = data[set].map(fn)\n  })\n  return data\n}\n\nfunction unParsePerson (person) {\n  if (typeof person === \"string\") return person\n  var name = person.name || \"\"\n  var u = person.url || person.web\n  var url = u ? (\" (\"+u+\")\") : \"\"\n  var e = person.email || person.mail\n  var email = e ? (\" <\"+e+\">\") : \"\"\n  return name+email+url\n}\n\nfunction parsePerson (person) {\n  if (typeof person !== \"string\") return person\n  var name = person.match(/^([^\\(<]+)/)\n  var url = person.match(/\\(([^\\)]+)\\)/)\n  var email = person.match(/<([^>]+)>/)\n  var obj = {}\n  if (name && name[0].trim()) obj.name = name[0].trim()\n  if (email) obj.email = email[1];\n  if (url) obj.url = url[1];\n  return obj\n}\n\nfunction addOptionalDepsToDeps (data, warn) {\n  var o = data.optionalDependencies\n  if (!o) return;\n  var d = data.dependencies || {}\n  Object.keys(o).forEach(function (k) {\n    d[k] = o[k]\n  })\n  data.dependencies = d\n}\n\nfunction depObjectify (deps, type, warn) {\n  if (!deps) return {}\n  if (typeof deps === \"string\") {\n    deps = deps.trim().split(/[\\n\\r\\s\\t ,]+/)\n  }\n  if (!Array.isArray(deps)) return deps\n  warn(\"deprecatedArrayDependencies\", type)\n  var o = {}\n  deps.filter(function (d) {\n    return typeof d === \"string\"\n  }).forEach(function(d) {\n    d = d.trim().split(/(:?[@\\s><=])/)\n    var dn = d.shift()\n    var dv = d.join(\"\")\n    dv = dv.trim()\n    dv = dv.replace(/^@/, \"\")\n    o[dn] = dv\n  })\n  return o\n}\n\nfunction objectifyDeps (data, warn) {\n  depTypes.forEach(function (type) {\n    if (!data[type]) return;\n    data[type] = depObjectify(data[type], type, warn)\n  })\n}\n\nfunction bugsTypos(bugs, warn) {\n  if (!bugs) return\n  Object.keys(bugs).forEach(function (k) {\n    if (typos.bugs[k]) {\n      warn(\"typo\", k, typos.bugs[k], \"bugs\")\n      bugs[typos.bugs[k]] = bugs[k]\n      delete bugs[k]\n    }\n  })\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}