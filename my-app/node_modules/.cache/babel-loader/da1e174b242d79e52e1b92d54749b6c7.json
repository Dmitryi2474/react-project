{"ast":null,"code":"var _ = require(\"lodash\");\n\n/**\n * @constructor\n */\nvar EasyExtender = function (plugins, hooks) {\n  this.plugins = {};\n  this.pluginOptions = {};\n  this.returnValues = {};\n  this.hooks = hooks;\n  this.defaultPlugins = plugins;\n  return this;\n};\n\n/**\n * @returns {EasyExtender}\n */\nEasyExtender.prototype.init = function () {\n  if (this.defaultPlugins) {\n    var required = Object.keys(this.defaultPlugins);\n    required.forEach(function (name) {\n      if (_.isUndefined(this.plugins[name])) {\n        this.plugins[name] = this.defaultPlugins[name];\n      }\n    }, this);\n  }\n  return this;\n};\n\n/**\n * Call the '.plugin()' method of all registered plugins\n */\nEasyExtender.prototype.initUserPlugins = function () {\n  var args = _.toArray(arguments);\n  var userPlugins = _.difference(Object.keys(this.plugins), Object.keys(this.defaultPlugins));\n  if (userPlugins.length) {\n    userPlugins.forEach(function (plugin) {\n      var pluginOptions = {};\n      if (this.pluginOptions) {\n        pluginOptions = this.pluginOptions[plugin];\n      }\n      this.returnValues[plugin].push({\n        value: this.get(plugin).apply(null, [pluginOptions].concat(args))\n      });\n      if (!_.isUndefined(pluginOptions) && !_.isUndefined(pluginOptions.enabled)) {\n        if (pluginOptions.enabled) {\n          this.enablePlugin(plugin);\n        } else {\n          this.disablePlugin(plugin);\n        }\n      } else {\n        this.enablePlugin(plugin);\n      }\n    }, this);\n  }\n};\n\n/**\n * Wrap a module in East Extender pattern\n * @param module\n * @param localName\n */\nEasyExtender.prototype.wrap = function (module, localName) {\n  this.registerPlugin({\n    \"plugin:name\": localName,\n    \"plugin\": function () {\n      return module;\n    }\n  });\n};\n\n/**\n * @param {String} name\n * @returns {Function|Boolean}\n */\nEasyExtender.prototype.get = function (name) {\n  if (!_.isUndefined(this.plugins[name])) {\n    return this.plugins[name].plugin || false;\n  }\n  return false;\n};\n\n/**\n * @param {Object} module\n * @param {Object} [opts]\n * @param {Function} [cb]\n */\nEasyExtender.prototype.registerPlugin = function (module, opts, cb) {\n  var pluginOptions;\n  if (!_.isFunction(module.plugin)) {\n    return _.isFunction(cb) ? cb(\"Module must implement a .plugin() method\") : false;\n  }\n  if (!cb && opts) {\n    if (_.isFunction(opts)) {\n      cb = opts;\n    } else {\n      pluginOptions = opts;\n    }\n  }\n  var name = _.isUndefined(module[\"plugin:name\"]) ? _.uniqueId() : module[\"plugin:name\"];\n  this.pluginOptions[name] = pluginOptions;\n  this.returnValues[name] = [];\n  this.plugins[name] = module;\n  if (_.isFunction(cb)) {\n    cb(null);\n  }\n  this.disablePlugin(name);\n  return this;\n};\n\n/**\n *\n * @param name\n */\nEasyExtender.prototype.getPlugin = function (module) {\n  if (_.isString(module)) {\n    module = this.plugins[module];\n  }\n  if (!module) {\n    return false;\n  }\n  return module;\n};\n\n/**\n *\n * @param name\n */\nEasyExtender.prototype.disablePlugin = function (module) {\n  module = this.getPlugin(module);\n  module._enabled = false;\n  return module;\n};\n\n/**\n * @param name\n */\nEasyExtender.prototype.enablePlugin = function (module) {\n  module = this.getPlugin(module);\n  module._enabled = true;\n  return module;\n};\n\n/**\n * @param name\n * @returns {*}\n */\nEasyExtender.prototype.hook = function (name) {\n  // Get any extra args\n  var args = Array.prototype.slice.call(arguments, 1);\n\n  // build a list of hook funcs\n  var funcs = [];\n  _.each(this.plugins, function (plugin) {\n    if (plugin.hooks) {\n      if (!_.isUndefined(plugin.hooks[name])) {\n        funcs.push(plugin.hooks[name]);\n      }\n    }\n  });\n  return this.hooks[name].apply(this, [funcs].concat(args));\n};\n\n/**\n * @param name\n * @returns {*}\n */\nEasyExtender.prototype.getReturnValues = function (name) {\n  return this.returnValues[name] || [];\n};\nmodule.exports = EasyExtender;","map":{"version":3,"names":["_","require","EasyExtender","plugins","hooks","pluginOptions","returnValues","defaultPlugins","prototype","init","required","Object","keys","forEach","name","isUndefined","initUserPlugins","args","toArray","arguments","userPlugins","difference","length","plugin","push","value","get","apply","concat","enabled","enablePlugin","disablePlugin","wrap","module","localName","registerPlugin","opts","cb","isFunction","uniqueId","getPlugin","isString","_enabled","hook","Array","slice","call","funcs","each","getReturnValues","exports"],"sources":["/home/user/Рабочий стол/pizza/project/node_modules/easy-extender/index.js"],"sourcesContent":["var _ = require(\"lodash\");\n\n/**\n * @constructor\n */\nvar EasyExtender = function (plugins, hooks) {\n\n    this.plugins        = {};\n    this.pluginOptions  = {};\n    this.returnValues   = {};\n\n    this.hooks          = hooks;\n    this.defaultPlugins = plugins;\n\n    return this;\n};\n\n/**\n * @returns {EasyExtender}\n */\nEasyExtender.prototype.init = function () {\n\n    if (this.defaultPlugins) {\n        var required = Object.keys(this.defaultPlugins);\n        required.forEach(function (name) {\n            if (_.isUndefined(this.plugins[name])) {\n                this.plugins[name] = this.defaultPlugins[name];\n            }\n        }, this);\n    }\n\n    return this;\n};\n\n/**\n * Call the '.plugin()' method of all registered plugins\n */\nEasyExtender.prototype.initUserPlugins = function () {\n\n    var args = _.toArray(arguments);\n\n    var userPlugins = _.difference(Object.keys(this.plugins), Object.keys(this.defaultPlugins));\n\n    if (userPlugins.length) {\n\n        userPlugins.forEach(function (plugin) {\n\n            var pluginOptions = {};\n\n            if (this.pluginOptions) {\n                pluginOptions = this.pluginOptions[plugin];\n            }\n\n            this.returnValues[plugin].push({\n                value: this.get(plugin).apply(null, [pluginOptions].concat(args))\n            });\n\n            if (!_.isUndefined(pluginOptions) && !_.isUndefined(pluginOptions.enabled)) {\n                if (pluginOptions.enabled) {\n                    this.enablePlugin(plugin);\n                } else {\n                    this.disablePlugin(plugin);\n                }\n            } else {\n                this.enablePlugin(plugin);\n            }\n\n        }, this);\n    }\n};\n\n/**\n * Wrap a module in East Extender pattern\n * @param module\n * @param localName\n */\nEasyExtender.prototype.wrap = function (module, localName) {\n    this.registerPlugin({\n        \"plugin:name\": localName,\n        \"plugin\": function () {\n            return module;\n        }\n    });\n};\n\n/**\n * @param {String} name\n * @returns {Function|Boolean}\n */\nEasyExtender.prototype.get = function (name) {\n\n    if (!_.isUndefined(this.plugins[name])) {\n        return this.plugins[name].plugin || false;\n    }\n\n    return false;\n};\n\n/**\n * @param {Object} module\n * @param {Object} [opts]\n * @param {Function} [cb]\n */\nEasyExtender.prototype.registerPlugin = function (module, opts, cb) {\n\n    var pluginOptions;\n\n    if (!_.isFunction(module.plugin)) {\n        return _.isFunction(cb) ? cb(\"Module must implement a .plugin() method\") : false;\n    }\n\n    if (!cb && opts) {\n        if (_.isFunction(opts)) {\n            cb = opts;\n        } else {\n            pluginOptions = opts;\n        }\n    }\n\n    var name = _.isUndefined(module[\"plugin:name\"]) ? _.uniqueId() : module[\"plugin:name\"];\n\n    this.pluginOptions[name] = pluginOptions;\n    this.returnValues[name]  = [];\n\n    this.plugins[name] = module;\n\n    if (_.isFunction(cb)) {\n        cb(null);\n    }\n\n    this.disablePlugin(name);\n\n    return this;\n};\n\n/**\n *\n * @param name\n */\nEasyExtender.prototype.getPlugin = function (module) {\n\n    if (_.isString(module)) {\n        module = this.plugins[module];\n    }\n\n    if (!module) {\n        return false;\n    }\n\n    return module;\n};\n\n/**\n *\n * @param name\n */\nEasyExtender.prototype.disablePlugin = function (module) {\n\n    module = this.getPlugin(module);\n    module._enabled = false;\n\n    return module;\n};\n\n/**\n * @param name\n */\nEasyExtender.prototype.enablePlugin = function (module) {\n\n    module = this.getPlugin(module);\n    module._enabled = true;\n\n    return module;\n};\n\n/**\n * @param name\n * @returns {*}\n */\nEasyExtender.prototype.hook = function (name) {\n\n    // Get any extra args\n    var args  = Array.prototype.slice.call(arguments, 1);\n\n    // build a list of hook funcs\n    var funcs = [];\n\n    _.each(this.plugins, function (plugin) {\n        if (plugin.hooks) {\n            if (!_.isUndefined(plugin.hooks[name])) {\n                funcs.push(plugin.hooks[name]);\n            }\n        }\n    });\n\n    return this.hooks[name].apply(this, [funcs].concat(args));\n};\n\n/**\n * @param name\n * @returns {*}\n */\nEasyExtender.prototype.getReturnValues = function (name) {\n    return this.returnValues[name] || [];\n};\n\nmodule.exports = EasyExtender;"],"mappings":"AAAA,IAAIA,CAAC,GAAGC,OAAO,CAAC,QAAQ,CAAC;;AAEzB;AACA;AACA;AACA,IAAIC,YAAY,GAAG,UAAUC,OAAO,EAAEC,KAAK,EAAE;EAEzC,IAAI,CAACD,OAAO,GAAU,CAAC,CAAC;EACxB,IAAI,CAACE,aAAa,GAAI,CAAC,CAAC;EACxB,IAAI,CAACC,YAAY,GAAK,CAAC,CAAC;EAExB,IAAI,CAACF,KAAK,GAAYA,KAAK;EAC3B,IAAI,CAACG,cAAc,GAAGJ,OAAO;EAE7B,OAAO,IAAI;AACf,CAAC;;AAED;AACA;AACA;AACAD,YAAY,CAACM,SAAS,CAACC,IAAI,GAAG,YAAY;EAEtC,IAAI,IAAI,CAACF,cAAc,EAAE;IACrB,IAAIG,QAAQ,GAAGC,MAAM,CAACC,IAAI,CAAC,IAAI,CAACL,cAAc,CAAC;IAC/CG,QAAQ,CAACG,OAAO,CAAC,UAAUC,IAAI,EAAE;MAC7B,IAAId,CAAC,CAACe,WAAW,CAAC,IAAI,CAACZ,OAAO,CAACW,IAAI,CAAC,CAAC,EAAE;QACnC,IAAI,CAACX,OAAO,CAACW,IAAI,CAAC,GAAG,IAAI,CAACP,cAAc,CAACO,IAAI,CAAC;MAClD;IACJ,CAAC,EAAE,IAAI,CAAC;EACZ;EAEA,OAAO,IAAI;AACf,CAAC;;AAED;AACA;AACA;AACAZ,YAAY,CAACM,SAAS,CAACQ,eAAe,GAAG,YAAY;EAEjD,IAAIC,IAAI,GAAGjB,CAAC,CAACkB,OAAO,CAACC,SAAS,CAAC;EAE/B,IAAIC,WAAW,GAAGpB,CAAC,CAACqB,UAAU,CAACV,MAAM,CAACC,IAAI,CAAC,IAAI,CAACT,OAAO,CAAC,EAAEQ,MAAM,CAACC,IAAI,CAAC,IAAI,CAACL,cAAc,CAAC,CAAC;EAE3F,IAAIa,WAAW,CAACE,MAAM,EAAE;IAEpBF,WAAW,CAACP,OAAO,CAAC,UAAUU,MAAM,EAAE;MAElC,IAAIlB,aAAa,GAAG,CAAC,CAAC;MAEtB,IAAI,IAAI,CAACA,aAAa,EAAE;QACpBA,aAAa,GAAG,IAAI,CAACA,aAAa,CAACkB,MAAM,CAAC;MAC9C;MAEA,IAAI,CAACjB,YAAY,CAACiB,MAAM,CAAC,CAACC,IAAI,CAAC;QAC3BC,KAAK,EAAE,IAAI,CAACC,GAAG,CAACH,MAAM,CAAC,CAACI,KAAK,CAAC,IAAI,EAAE,CAACtB,aAAa,CAAC,CAACuB,MAAM,CAACX,IAAI,CAAC;MACpE,CAAC,CAAC;MAEF,IAAI,CAACjB,CAAC,CAACe,WAAW,CAACV,aAAa,CAAC,IAAI,CAACL,CAAC,CAACe,WAAW,CAACV,aAAa,CAACwB,OAAO,CAAC,EAAE;QACxE,IAAIxB,aAAa,CAACwB,OAAO,EAAE;UACvB,IAAI,CAACC,YAAY,CAACP,MAAM,CAAC;QAC7B,CAAC,MAAM;UACH,IAAI,CAACQ,aAAa,CAACR,MAAM,CAAC;QAC9B;MACJ,CAAC,MAAM;QACH,IAAI,CAACO,YAAY,CAACP,MAAM,CAAC;MAC7B;IAEJ,CAAC,EAAE,IAAI,CAAC;EACZ;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA;AACArB,YAAY,CAACM,SAAS,CAACwB,IAAI,GAAG,UAAUC,MAAM,EAAEC,SAAS,EAAE;EACvD,IAAI,CAACC,cAAc,CAAC;IAChB,aAAa,EAAED,SAAS;IACxB,QAAQ,EAAE,YAAY;MAClB,OAAOD,MAAM;IACjB;EACJ,CAAC,CAAC;AACN,CAAC;;AAED;AACA;AACA;AACA;AACA/B,YAAY,CAACM,SAAS,CAACkB,GAAG,GAAG,UAAUZ,IAAI,EAAE;EAEzC,IAAI,CAACd,CAAC,CAACe,WAAW,CAAC,IAAI,CAACZ,OAAO,CAACW,IAAI,CAAC,CAAC,EAAE;IACpC,OAAO,IAAI,CAACX,OAAO,CAACW,IAAI,CAAC,CAACS,MAAM,IAAI,KAAK;EAC7C;EAEA,OAAO,KAAK;AAChB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACArB,YAAY,CAACM,SAAS,CAAC2B,cAAc,GAAG,UAAUF,MAAM,EAAEG,IAAI,EAAEC,EAAE,EAAE;EAEhE,IAAIhC,aAAa;EAEjB,IAAI,CAACL,CAAC,CAACsC,UAAU,CAACL,MAAM,CAACV,MAAM,CAAC,EAAE;IAC9B,OAAOvB,CAAC,CAACsC,UAAU,CAACD,EAAE,CAAC,GAAGA,EAAE,CAAC,0CAA0C,CAAC,GAAG,KAAK;EACpF;EAEA,IAAI,CAACA,EAAE,IAAID,IAAI,EAAE;IACb,IAAIpC,CAAC,CAACsC,UAAU,CAACF,IAAI,CAAC,EAAE;MACpBC,EAAE,GAAGD,IAAI;IACb,CAAC,MAAM;MACH/B,aAAa,GAAG+B,IAAI;IACxB;EACJ;EAEA,IAAItB,IAAI,GAAGd,CAAC,CAACe,WAAW,CAACkB,MAAM,CAAC,aAAa,CAAC,CAAC,GAAGjC,CAAC,CAACuC,QAAQ,EAAE,GAAGN,MAAM,CAAC,aAAa,CAAC;EAEtF,IAAI,CAAC5B,aAAa,CAACS,IAAI,CAAC,GAAGT,aAAa;EACxC,IAAI,CAACC,YAAY,CAACQ,IAAI,CAAC,GAAI,EAAE;EAE7B,IAAI,CAACX,OAAO,CAACW,IAAI,CAAC,GAAGmB,MAAM;EAE3B,IAAIjC,CAAC,CAACsC,UAAU,CAACD,EAAE,CAAC,EAAE;IAClBA,EAAE,CAAC,IAAI,CAAC;EACZ;EAEA,IAAI,CAACN,aAAa,CAACjB,IAAI,CAAC;EAExB,OAAO,IAAI;AACf,CAAC;;AAED;AACA;AACA;AACA;AACAZ,YAAY,CAACM,SAAS,CAACgC,SAAS,GAAG,UAAUP,MAAM,EAAE;EAEjD,IAAIjC,CAAC,CAACyC,QAAQ,CAACR,MAAM,CAAC,EAAE;IACpBA,MAAM,GAAG,IAAI,CAAC9B,OAAO,CAAC8B,MAAM,CAAC;EACjC;EAEA,IAAI,CAACA,MAAM,EAAE;IACT,OAAO,KAAK;EAChB;EAEA,OAAOA,MAAM;AACjB,CAAC;;AAED;AACA;AACA;AACA;AACA/B,YAAY,CAACM,SAAS,CAACuB,aAAa,GAAG,UAAUE,MAAM,EAAE;EAErDA,MAAM,GAAG,IAAI,CAACO,SAAS,CAACP,MAAM,CAAC;EAC/BA,MAAM,CAACS,QAAQ,GAAG,KAAK;EAEvB,OAAOT,MAAM;AACjB,CAAC;;AAED;AACA;AACA;AACA/B,YAAY,CAACM,SAAS,CAACsB,YAAY,GAAG,UAAUG,MAAM,EAAE;EAEpDA,MAAM,GAAG,IAAI,CAACO,SAAS,CAACP,MAAM,CAAC;EAC/BA,MAAM,CAACS,QAAQ,GAAG,IAAI;EAEtB,OAAOT,MAAM;AACjB,CAAC;;AAED;AACA;AACA;AACA;AACA/B,YAAY,CAACM,SAAS,CAACmC,IAAI,GAAG,UAAU7B,IAAI,EAAE;EAE1C;EACA,IAAIG,IAAI,GAAI2B,KAAK,CAACpC,SAAS,CAACqC,KAAK,CAACC,IAAI,CAAC3B,SAAS,EAAE,CAAC,CAAC;;EAEpD;EACA,IAAI4B,KAAK,GAAG,EAAE;EAEd/C,CAAC,CAACgD,IAAI,CAAC,IAAI,CAAC7C,OAAO,EAAE,UAAUoB,MAAM,EAAE;IACnC,IAAIA,MAAM,CAACnB,KAAK,EAAE;MACd,IAAI,CAACJ,CAAC,CAACe,WAAW,CAACQ,MAAM,CAACnB,KAAK,CAACU,IAAI,CAAC,CAAC,EAAE;QACpCiC,KAAK,CAACvB,IAAI,CAACD,MAAM,CAACnB,KAAK,CAACU,IAAI,CAAC,CAAC;MAClC;IACJ;EACJ,CAAC,CAAC;EAEF,OAAO,IAAI,CAACV,KAAK,CAACU,IAAI,CAAC,CAACa,KAAK,CAAC,IAAI,EAAE,CAACoB,KAAK,CAAC,CAACnB,MAAM,CAACX,IAAI,CAAC,CAAC;AAC7D,CAAC;;AAED;AACA;AACA;AACA;AACAf,YAAY,CAACM,SAAS,CAACyC,eAAe,GAAG,UAAUnC,IAAI,EAAE;EACrD,OAAO,IAAI,CAACR,YAAY,CAACQ,IAAI,CAAC,IAAI,EAAE;AACxC,CAAC;AAEDmB,MAAM,CAACiB,OAAO,GAAGhD,YAAY"},"metadata":{},"sourceType":"script"}