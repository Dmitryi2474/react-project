{"ast":null,"code":"\"use strict\";\n\nvar chalk = require(\"chalk\");\nvar parser = require(\"./lib/parser\");\nvar objectPath = require(\"object-path\");\n\n/**\n * Stateless compiler.\n * @param {String} string\n * @param {Object} [custom] - Any custom methods\n * @param {Object} [opts] - Options\n * @returns {String}\n */\nfunction compile(string, custom, opts) {\n  opts = opts || {};\n  return parseAst(createAst(parser, string), custom, function (err) {\n    if (err) {\n      if (opts.logErrors) {\n        console.log(err.msg);\n      }\n      if (opts.failOnError) {\n        throw Error(err.msg);\n      }\n    }\n  });\n}\n\n/**\n * @param parser\n * @param string\n * @returns {*}\n */\nfunction createAst(parser, string) {\n  return parser.parse(string);\n}\n\n/**\n * @param ast\n * @param custom\n * @param {Function} cb\n */\nfunction parseAst(ast, custom, cb) {\n  var colors = [];\n  return ast.reduce(function (joined, item) {\n    var fn;\n    if (item.color) {\n      if (item.text) {\n        if (fn = resolveFun(item.color, custom)) {\n          colors.push(fn);\n          return joined + fn(item.text);\n        } else {\n          cb({\n            msg: \"Method does not exist: \" + item.color\n          });\n          return joined + item.text;\n        }\n      }\n    }\n    if (item.buffer) {\n      return colors.length ? joined + colors[colors.length - 1](item.buffer) : joined + item.buffer;\n    }\n    if (item.reset) {\n      colors.pop();\n      if (item.text) {\n        return colors.length ? joined + colors[colors.length - 1](item.text) : joined + item.text;\n      }\n    }\n    return joined;\n  }, \"\");\n}\n\n/**\n * @param path\n * @param custom\n * @returns {*}\n */\nfunction resolveFun(path, custom) {\n  var fn;\n  if (fn = getFun(custom, path)) {\n    return fn.bind({\n      compile: compile\n    });\n  }\n  return getFun(chalk, path);\n}\n\n/**\n * Get a function from an object\n */\nfunction getFun(obj, path) {\n  if (!obj) {\n    return false;\n  }\n  return objectPath.get(obj, path);\n}\n\n/**\n * @param {Object} [opts]\n * @param {Object} custom\n * @returns {Compiler}\n */\nfunction Compiler(custom, opts) {\n  opts = opts || {};\n  custom = custom || {};\n  this.prefix = \"\";\n  if (typeof opts.prefix === \"string\") {\n    this.prefix = compile(opts.prefix, custom, opts);\n  }\n  if (typeof opts.prefix === \"function\") {\n    this.prefix = opts.prefix;\n  }\n  this.compile = function (string, noPrefix) {\n    var out = \"\";\n    if (!noPrefix) {\n      if (typeof this.prefix === \"function\") {\n        out = this.prefix.apply({\n          compile: compile\n        }, [string, opts]);\n      } else {\n        out = this.prefix;\n      }\n    }\n    return out + compile(string, custom, opts);\n  };\n  return this;\n}\nmodule.exports = compile;\nmodule.exports.parse = function (string) {\n  return createAst(parser, string);\n};\nmodule.exports.clean = function (string) {\n  var ast = createAst(parser, string);\n  return ast.reduce(function (joined, item) {\n    if (item.color) {\n      if (item.text) {\n        return joined + item.text;\n      }\n    }\n    if (item.buffer) {\n      return joined + item.buffer;\n    }\n    if (item.reset) {\n      return joined + item.text;\n    }\n    return joined;\n  }, \"\");\n};\nmodule.exports.Compiler = Compiler;","map":{"version":3,"names":["chalk","require","parser","objectPath","compile","string","custom","opts","parseAst","createAst","err","logErrors","console","log","msg","failOnError","Error","parse","ast","cb","colors","reduce","joined","item","fn","color","text","resolveFun","push","buffer","length","reset","pop","path","getFun","bind","obj","get","Compiler","prefix","noPrefix","out","apply","module","exports","clean"],"sources":["/home/user/Рабочий стол/pizza/project/node_modules/tfunk/index.js"],"sourcesContent":["\"use strict\";\n\nvar chalk      = require(\"chalk\");\nvar parser     = require(\"./lib/parser\");\nvar objectPath = require(\"object-path\");\n\n/**\n * Stateless compiler.\n * @param {String} string\n * @param {Object} [custom] - Any custom methods\n * @param {Object} [opts] - Options\n * @returns {String}\n */\nfunction compile(string, custom, opts) {\n    opts = opts || {};\n    return parseAst(createAst(parser, string), custom, function (err) {\n        if (err) {\n            if (opts.logErrors) {\n                console.log(err.msg);\n            }\n            if (opts.failOnError) {\n                throw Error(err.msg);\n            }\n        }\n    });\n}\n\n/**\n * @param parser\n * @param string\n * @returns {*}\n */\nfunction createAst(parser, string) {\n    return parser.parse(string);\n}\n\n/**\n * @param ast\n * @param custom\n * @param {Function} cb\n */\nfunction parseAst(ast, custom, cb) {\n\n    var colors = [];\n\n    return ast.reduce(function (joined, item) {\n\n        var fn;\n\n        if (item.color) {\n            if (item.text) {\n                if (fn = resolveFun(item.color, custom)) {\n                    colors.push(fn);\n                    return joined + fn(item.text);\n                } else {\n                    cb({\n                        msg: \"Method does not exist: \" + item.color\n                    });\n                    return joined + item.text;\n                }\n            }\n        }\n\n        if (item.buffer) {\n            return colors.length\n                ? joined + colors[colors.length-1](item.buffer)\n                : joined + item.buffer;\n        }\n\n        if (item.reset) {\n            colors.pop();\n            if (item.text) {\n                return colors.length\n                    ? joined + colors[colors.length-1](item.text)\n                    : joined + item.text;\n            }\n        }\n\n        return joined;\n\n    }, \"\");\n}\n\n/**\n * @param path\n * @param custom\n * @returns {*}\n */\nfunction resolveFun(path, custom) {\n\n    var fn;\n    if (fn = getFun(custom, path)) {\n        return fn.bind({compile:compile});\n    }\n\n    return  getFun(chalk, path);\n}\n\n/**\n * Get a function from an object\n */\nfunction getFun(obj, path) {\n\n    if (!obj) {\n        return false;\n    }\n\n    return objectPath.get(obj, path);\n}\n\n/**\n * @param {Object} [opts]\n * @param {Object} custom\n * @returns {Compiler}\n */\nfunction Compiler(custom, opts) {\n\n    opts = opts || {};\n    custom = custom || {};\n\n    this.prefix = \"\";\n\n    if (typeof opts.prefix === \"string\") {\n        this.prefix = compile(opts.prefix, custom, opts);\n    }\n\n    if (typeof opts.prefix === \"function\") {\n        this.prefix = opts.prefix;\n    }\n\n    this.compile = function (string, noPrefix) {\n\n        var out = \"\";\n\n        if (!noPrefix) {\n\n            if (typeof this.prefix === \"function\") {\n                out = this.prefix.apply({compile: compile}, [string, opts]);\n            } else {\n                out = this.prefix;\n            }\n        }\n\n        return out + compile(string, custom, opts);\n\n    };\n\n    return this;\n}\n\nmodule.exports = compile;\nmodule.exports.parse = function (string) {\n    return createAst(parser, string);\n};\nmodule.exports.clean = function (string) {\n    var ast = createAst(parser, string);\n    return ast.reduce(function (joined, item) {\n        if (item.color) {\n            if (item.text) {\n                return joined + item.text;\n            }\n        }\n        if (item.buffer) {\n            return joined + item.buffer;\n        }\n        if (item.reset) {\n            return joined + item.text;\n        }\n        return joined;\n    }, \"\");\n};\nmodule.exports.Compiler = Compiler;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,KAAK,GAAQC,OAAO,CAAC,OAAO,CAAC;AACjC,IAAIC,MAAM,GAAOD,OAAO,CAAC,cAAc,CAAC;AACxC,IAAIE,UAAU,GAAGF,OAAO,CAAC,aAAa,CAAC;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASG,OAAO,CAACC,MAAM,EAAEC,MAAM,EAAEC,IAAI,EAAE;EACnCA,IAAI,GAAGA,IAAI,IAAI,CAAC,CAAC;EACjB,OAAOC,QAAQ,CAACC,SAAS,CAACP,MAAM,EAAEG,MAAM,CAAC,EAAEC,MAAM,EAAE,UAAUI,GAAG,EAAE;IAC9D,IAAIA,GAAG,EAAE;MACL,IAAIH,IAAI,CAACI,SAAS,EAAE;QAChBC,OAAO,CAACC,GAAG,CAACH,GAAG,CAACI,GAAG,CAAC;MACxB;MACA,IAAIP,IAAI,CAACQ,WAAW,EAAE;QAClB,MAAMC,KAAK,CAACN,GAAG,CAACI,GAAG,CAAC;MACxB;IACJ;EACJ,CAAC,CAAC;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASL,SAAS,CAACP,MAAM,EAAEG,MAAM,EAAE;EAC/B,OAAOH,MAAM,CAACe,KAAK,CAACZ,MAAM,CAAC;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASG,QAAQ,CAACU,GAAG,EAAEZ,MAAM,EAAEa,EAAE,EAAE;EAE/B,IAAIC,MAAM,GAAG,EAAE;EAEf,OAAOF,GAAG,CAACG,MAAM,CAAC,UAAUC,MAAM,EAAEC,IAAI,EAAE;IAEtC,IAAIC,EAAE;IAEN,IAAID,IAAI,CAACE,KAAK,EAAE;MACZ,IAAIF,IAAI,CAACG,IAAI,EAAE;QACX,IAAIF,EAAE,GAAGG,UAAU,CAACJ,IAAI,CAACE,KAAK,EAAEnB,MAAM,CAAC,EAAE;UACrCc,MAAM,CAACQ,IAAI,CAACJ,EAAE,CAAC;UACf,OAAOF,MAAM,GAAGE,EAAE,CAACD,IAAI,CAACG,IAAI,CAAC;QACjC,CAAC,MAAM;UACHP,EAAE,CAAC;YACCL,GAAG,EAAE,yBAAyB,GAAGS,IAAI,CAACE;UAC1C,CAAC,CAAC;UACF,OAAOH,MAAM,GAAGC,IAAI,CAACG,IAAI;QAC7B;MACJ;IACJ;IAEA,IAAIH,IAAI,CAACM,MAAM,EAAE;MACb,OAAOT,MAAM,CAACU,MAAM,GACdR,MAAM,GAAGF,MAAM,CAACA,MAAM,CAACU,MAAM,GAAC,CAAC,CAAC,CAACP,IAAI,CAACM,MAAM,CAAC,GAC7CP,MAAM,GAAGC,IAAI,CAACM,MAAM;IAC9B;IAEA,IAAIN,IAAI,CAACQ,KAAK,EAAE;MACZX,MAAM,CAACY,GAAG,EAAE;MACZ,IAAIT,IAAI,CAACG,IAAI,EAAE;QACX,OAAON,MAAM,CAACU,MAAM,GACdR,MAAM,GAAGF,MAAM,CAACA,MAAM,CAACU,MAAM,GAAC,CAAC,CAAC,CAACP,IAAI,CAACG,IAAI,CAAC,GAC3CJ,MAAM,GAAGC,IAAI,CAACG,IAAI;MAC5B;IACJ;IAEA,OAAOJ,MAAM;EAEjB,CAAC,EAAE,EAAE,CAAC;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASK,UAAU,CAACM,IAAI,EAAE3B,MAAM,EAAE;EAE9B,IAAIkB,EAAE;EACN,IAAIA,EAAE,GAAGU,MAAM,CAAC5B,MAAM,EAAE2B,IAAI,CAAC,EAAE;IAC3B,OAAOT,EAAE,CAACW,IAAI,CAAC;MAAC/B,OAAO,EAACA;IAAO,CAAC,CAAC;EACrC;EAEA,OAAQ8B,MAAM,CAAClC,KAAK,EAAEiC,IAAI,CAAC;AAC/B;;AAEA;AACA;AACA;AACA,SAASC,MAAM,CAACE,GAAG,EAAEH,IAAI,EAAE;EAEvB,IAAI,CAACG,GAAG,EAAE;IACN,OAAO,KAAK;EAChB;EAEA,OAAOjC,UAAU,CAACkC,GAAG,CAACD,GAAG,EAAEH,IAAI,CAAC;AACpC;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASK,QAAQ,CAAChC,MAAM,EAAEC,IAAI,EAAE;EAE5BA,IAAI,GAAGA,IAAI,IAAI,CAAC,CAAC;EACjBD,MAAM,GAAGA,MAAM,IAAI,CAAC,CAAC;EAErB,IAAI,CAACiC,MAAM,GAAG,EAAE;EAEhB,IAAI,OAAOhC,IAAI,CAACgC,MAAM,KAAK,QAAQ,EAAE;IACjC,IAAI,CAACA,MAAM,GAAGnC,OAAO,CAACG,IAAI,CAACgC,MAAM,EAAEjC,MAAM,EAAEC,IAAI,CAAC;EACpD;EAEA,IAAI,OAAOA,IAAI,CAACgC,MAAM,KAAK,UAAU,EAAE;IACnC,IAAI,CAACA,MAAM,GAAGhC,IAAI,CAACgC,MAAM;EAC7B;EAEA,IAAI,CAACnC,OAAO,GAAG,UAAUC,MAAM,EAAEmC,QAAQ,EAAE;IAEvC,IAAIC,GAAG,GAAG,EAAE;IAEZ,IAAI,CAACD,QAAQ,EAAE;MAEX,IAAI,OAAO,IAAI,CAACD,MAAM,KAAK,UAAU,EAAE;QACnCE,GAAG,GAAG,IAAI,CAACF,MAAM,CAACG,KAAK,CAAC;UAACtC,OAAO,EAAEA;QAAO,CAAC,EAAE,CAACC,MAAM,EAAEE,IAAI,CAAC,CAAC;MAC/D,CAAC,MAAM;QACHkC,GAAG,GAAG,IAAI,CAACF,MAAM;MACrB;IACJ;IAEA,OAAOE,GAAG,GAAGrC,OAAO,CAACC,MAAM,EAAEC,MAAM,EAAEC,IAAI,CAAC;EAE9C,CAAC;EAED,OAAO,IAAI;AACf;AAEAoC,MAAM,CAACC,OAAO,GAAGxC,OAAO;AACxBuC,MAAM,CAACC,OAAO,CAAC3B,KAAK,GAAG,UAAUZ,MAAM,EAAE;EACrC,OAAOI,SAAS,CAACP,MAAM,EAAEG,MAAM,CAAC;AACpC,CAAC;AACDsC,MAAM,CAACC,OAAO,CAACC,KAAK,GAAG,UAAUxC,MAAM,EAAE;EACrC,IAAIa,GAAG,GAAGT,SAAS,CAACP,MAAM,EAAEG,MAAM,CAAC;EACnC,OAAOa,GAAG,CAACG,MAAM,CAAC,UAAUC,MAAM,EAAEC,IAAI,EAAE;IACtC,IAAIA,IAAI,CAACE,KAAK,EAAE;MACZ,IAAIF,IAAI,CAACG,IAAI,EAAE;QACX,OAAOJ,MAAM,GAAGC,IAAI,CAACG,IAAI;MAC7B;IACJ;IACA,IAAIH,IAAI,CAACM,MAAM,EAAE;MACb,OAAOP,MAAM,GAAGC,IAAI,CAACM,MAAM;IAC/B;IACA,IAAIN,IAAI,CAACQ,KAAK,EAAE;MACZ,OAAOT,MAAM,GAAGC,IAAI,CAACG,IAAI;IAC7B;IACA,OAAOJ,MAAM;EACjB,CAAC,EAAE,EAAE,CAAC;AACV,CAAC;AACDqB,MAAM,CAACC,OAAO,CAACN,QAAQ,GAAGA,QAAQ"},"metadata":{},"sourceType":"script"}