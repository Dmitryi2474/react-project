{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar immutable_1 = require(\"immutable\");\nfunction addToFilesOption(incoming) {\n  if (!incoming.get(\"watch\")) {\n    return [incoming, []];\n  }\n  var serverPaths = [];\n  var fromServeStatic = incoming.get(\"serveStatic\", immutable_1.List([])).toArray();\n  var ssPaths = fromServeStatic.reduce(function (acc, ss) {\n    if (typeof ss === \"string\") {\n      return acc.concat(ss);\n    }\n    if (ss.dir && typeof ss.dir === \"string\") {\n      return acc.concat(ss);\n    }\n    return acc;\n  }, []);\n  ssPaths.forEach(function (p) {\n    return serverPaths.push(p);\n  });\n  var server = incoming.get(\"server\");\n  if (server) {\n    if (server === true) {\n      serverPaths.push(\".\");\n    }\n    if (typeof server === \"string\") {\n      serverPaths.push(server);\n    }\n    if (immutable_1.List.isList(server) && server.every(function (x) {\n      return typeof x === \"string\";\n    })) {\n      server.forEach(function (s) {\n        return serverPaths.push(s);\n      });\n    }\n    if (immutable_1.Map.isMap(server)) {\n      var baseDirProp = server.get(\"baseDir\");\n      var baseDirs = immutable_1.List([]).concat(baseDirProp).filter(Boolean);\n      baseDirs.forEach(function (s) {\n        return serverPaths.push(s);\n      });\n    }\n  }\n  var output = incoming.update(\"files\", function (files) {\n    return immutable_1.List([]).concat(files, serverPaths).filter(Boolean);\n  });\n  return [output, []];\n}\nexports.addToFilesOption = addToFilesOption;","map":{"version":3,"mappings":";;;;;AAAA;AAGA,SAAgBA,gBAAgB,CAACC,QAAuB;EACpD,IAAI,CAACA,QAAQ,CAACC,GAAG,CAAC,OAAO,CAAC,EAAE;IACxB,OAAO,CAACD,QAAQ,EAAE,EAAE,CAAC;;EAGzB,IAAIE,WAAW,GAAG,EAAE;EAEpB,IAAMC,eAAe,GAAGH,QAAQ,CAC3BC,GAAG,CAAC,aAAa,EAAEG,gBAAI,CAAC,EAAE,CAAC,CAAC,CAC5BC,OAAO,EAAE;EACd,IAAMC,OAAO,GAAGH,eAAe,CAC1BI,MAAM,CAAC,UAACC,GAAG,EAAEC,EAAE;IACZ,IAAI,OAAOA,EAAE,KAAK,QAAQ,EAAE;MACxB,OAAOD,GAAG,CAACE,MAAM,CAACD,EAAE,CAAC;;IAEzB,IAAIA,EAAE,CAACE,GAAG,IAAI,OAAOF,EAAE,CAACE,GAAG,KAAK,QAAQ,EAAE;MACtC,OAAOH,GAAG,CAACE,MAAM,CAACD,EAAE,CAAC;;IAEzB,OAAOD,GAAG;EACd,CAAC,EAAE,EAAE,CAAC;EAEVF,OAAO,CAACM,OAAO,CAAC,WAAC;IAAI,kBAAW,CAACC,IAAI,CAACC,CAAC,CAAC;EAAnB,CAAmB,CAAC;EAEzC,IAAMC,MAAM,GAAGf,QAAQ,CAACC,GAAG,CAAC,QAAQ,CAAC;EACrC,IAAIc,MAAM,EAAE;IACR,IAAIA,MAAM,KAAK,IAAI,EAAE;MACjBb,WAAW,CAACW,IAAI,CAAC,GAAG,CAAC;;IAEzB,IAAI,OAAOE,MAAM,KAAK,QAAQ,EAAE;MAC5Bb,WAAW,CAACW,IAAI,CAACE,MAAM,CAAC;;IAE5B,IACIX,gBAAI,CAACY,MAAM,CAACD,MAAM,CAAC,IACnBA,MAAM,CAACE,KAAK,CAAC,WAAC;MAAI,cAAOC,CAAC,KAAK,QAAQ;IAArB,CAAqB,CAAC,EAC1C;MACEH,MAAM,CAACH,OAAO,CAAC,WAAC;QAAI,kBAAW,CAACC,IAAI,CAACM,CAAC,CAAC;MAAnB,CAAmB,CAAC;;IAE5C,IAAIf,eAAG,CAACgB,KAAK,CAACL,MAAM,CAAC,EAAE;MACnB,IAAMM,WAAW,GAAGN,MAAM,CAACd,GAAG,CAAC,SAAS,CAAC;MACzC,IAAMqB,QAAQ,GAAGlB,gBAAI,CAAC,EAAE,CAAC,CAACM,MAAM,CAACW,WAAW,CAAC,CAACE,MAAM,CAACC,OAAO,CAAC;MAC7DF,QAAQ,CAACV,OAAO,CAAC,WAAC;QAAI,kBAAW,CAACC,IAAI,CAACM,CAAC,CAAC;MAAnB,CAAmB,CAAC;;;EAIlD,IAAMM,MAAM,GAAGzB,QAAQ,CAAC0B,MAAM,CAAC,OAAO,EAAE,eAAK;IACzC,OAAOtB,gBAAI,CAAC,EAAE,CAAC,CACVM,MAAM,CAACiB,KAAK,EAAEzB,WAAW,CAAC,CAC1BqB,MAAM,CAACC,OAAO,CAAC;EACxB,CAAC,CAAC;EACF,OAAO,CAACC,MAAM,EAAE,EAAE,CAAC;AACvB;AAlDAG","names":["addToFilesOption","incoming","get","serverPaths","fromServeStatic","immutable_1","toArray","ssPaths","reduce","acc","ss","concat","dir","forEach","push","p","server","isList","every","x","s","isMap","baseDirProp","baseDirs","filter","Boolean","output","update","files","exports"],"sources":["../../../lib/cli/transforms/addToFilesOption.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}